---
layout: post
title: "csv"
date: 2016-06-17 21:00:27 +0800
comments: true
categories: ruby
---

> ref 中文亂碼 https://cnodejs.org/topic/516e0ab46d382773067a5473
``` ruby
#encoding: UTF-8
require 'csv'
filename='test.csv'
File.open(filename,"wb"){|f| f.write("\xEF\xBB\xBF") } #解決中文亂碼 加入"\xEF\xBB\xBF"
@csv=[["麵包", "15"], ["吐司", "50"], ["牛奶", "70"]]

#save 
CSV.open(filename, 'a') do |csv|
    @csv.each { |data| csv << data }
end
 
#讀取每行
CSV.foreach(filename)do |row|
    row.each do |column|
    	print column
    end
    puts
end
#麵包15
#吐司50
#牛奶70

#讀取
p CSV.read(filename, { col_sep: ',' }) # col_sep: ';' 使用;分割 預設,可省略
#[["﻿麵包", "15"], ["吐司", "50"], ["牛奶", "70"]]

```