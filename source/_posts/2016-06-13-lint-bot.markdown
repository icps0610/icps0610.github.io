---
layout: post
title: "line-bot"
date: 2016-06-13 01:27:59 +0800
comments: true
categories: 
---
https://business.line.me/zh-hant/products/4/introduction<br />
https://github.com/line/line-bot-sdk-ruby<br />
https://developers.line.me/bot-api/overview<br />
https://www.heroku.com/<br />

  ```ruby
  Rails.application.routes.draw do
  root :to => "page#index"
  match '/callback' => "page#callback", :via => :post
end

class PageController < ApplicationController
  protect_from_forgery with: :null_session

  def index
  end

  def callback
    line_msg = params[:result][0]
    username = client.get_user_profile( line_msg["content"]["from"] ).contacts[0].display_name
  end

  private

  def client
    c = Line::Bot::Client.new do |config|
      config.channel_id     = ENV["LINE_CHANNEL_ID"]
      config.channel_secret = ENV["LINE_CHANNEL_SECRET"]
      config.channel_mid    = ENV["LINE_CHANNEL_MID"]
    end
  end
end

  ```