---
layout: post
title: "qrcode"
date: 2016-06-19 23:54:44 +0800
comments: true
categories: ruby
---

### 換顏色
``` ruby
 #/usr/local/lib/ruby/gems/2.3.0/gems/rqrcode_png-0.1.5/lib/rqrcode_png/image.rb
 #3 
 BLACK = ::ChunkyPNG::Color.rgba(255,91,145,255) #pink
```

``` ruby
require 'rqrcode_png'
require "mini_magick"
text="test"
input_image="3.jpg"
qr = RQRCode::QRCode.new( text, :size => 6, :level => :m )
png = qr.to_img.resize(300, 300).save("qr.png")

qr_png = MiniMagick::Image.open("qr.png")
image = MiniMagick::Image.open(input_image)
image.resize "80x80"
result = qr_png.composite(image) do |c|
  c.compose "Over"
  c.geometry "+#{((300-image.width.to_i)/2).to_s}+#{((300-image.height.to_i)/2).to_s}"
end
result.write "qr.jpg"
```