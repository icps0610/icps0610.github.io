---
layout: post
title: "ssh"
date: 2017-08-14 18:21:12 +0800
comments: true
categories: ruby
---
``` ruby
target = ARGV[0]
ip  = `ifconfig | grep Bcast | cut -d " " -f 12 | cut -d ":" -f 2`
ip  = `ifconfig | grep inet | grep cast | cut -d " " -f 10` if ip == ""
lan = ip.split("\n").map{|i| i.scan(/(\d*\.\d*\.\d*\.)\d*/).join}

if lan.count > 1
  puts lan
  print "----------\n> "
  ch = STDIN.gets.to_i
  lan = lan[ch-1]
end
system "/usr/bin/ssh #{[lan].join}#{target}"
```